
<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Assignment 2 Tic Tac Toe</title>
    <style type="text/css">
      h2 {
        text-align: center;
        font-size: 30px
      }
      
      div {
        text-align: center;
        font-size: 20px
      }

      .t-button {
        width: 80px;
        height: 70px;
        background-color: #428DC6;
        padding: 12px 7px 7px 7px;
        margin: 4px 5px;
        display: inline-block;
        font-size: 40px;
        font-weight: 700;
        box-sizing: border-box;
        color: #fff;
      }

      .t-button:hover {
        background-color: #606060
      }

      .t-container {
        border: 1px solid #000;
        padding: 10px;
        text-align: center;
        width: 300px;
        margin: 0 auto
      }

    </style>
    <script language="javascript">
      window.onload = function() {
        buttons = document.querySelectorAll(".t-button");
        buttons.forEach(function(item) {
          item.addEventListener("click", pressButton)
        }) // end buttons for each

      } // end window onload

      function pressButton() {
      
      	// increase turn number up to 9
        btn = this.id;
        turn = document.getElementById("turn");
        turnInt = parseInt(turn.innerHTML);
        //console.log(turnInt)
        if (turnInt < 10){
        	turnInt += 1; 
          }
         if (turnInt<10){
         	turn.innerHTML = turnInt;
         }
        
        // place the player's symbol in the button
        player = document.getElementById("player");
        //console.log(player.innerHTML);
        thisBtn = document.getElementById(btn);
        thisBtn.innerHTML = player.innerHTML;
        
        // remove onclick from that button
       thisBtn.removeEventListener('click',pressButton)
        
        // switch to other player
        if (player.innerHTML == "X") {
        	player.innerHTML = "O"
        }
        else {
        	player.innerHTML = "X"
        }
        
        // get all the button values
        btnValues = ["","","","","","","","",""];
        for (let i = 9; i>=1; i--){
        	thisBtnValue = document.getElementById(i).innerHTML;
        	btnValues[i-1] = thisBtnValue;
          
        }
        
        winnerStatement = "Game in progress...";
        console.log(btnValues);
        
         // check rows for win condition
 				switch(btnValues[6]+btnValues[7]+btnValues[8]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        switch(btnValues[3]+btnValues[4]+btnValues[5]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        switch(btnValues[0]+btnValues[1]+btnValues[2]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        
        // check columns for win condition
        switch(btnValues[0]+btnValues[3]+btnValues[6]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        switch(btnValues[1]+btnValues[4]+btnValues[7]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        switch(btnValues[2]+btnValues[5]+btnValues[8]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        
        // check diagonals for win condition
        switch(btnValues[0]+btnValues[4]+btnValues[8]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        switch(btnValues[2]+btnValues[4]+btnValues[6]){
        	case "XXX":
          	winnerStatement = "X wins!";
            break;     
          case "OOO":
          	winnerStatement = "Y wins!";
            break;
        }
        
       
        // if someone won, remove onclicks
        if (winnerStatement != "Game in progress..."){
          buttons = document.querySelectorAll(".t-button");
          buttons.forEach(function(item) {
            item.removeEventListener("click", pressButton)
          }) 
        }
        
        // if no one won, display stalemate
        if (turnInt==10 && winnerStatement == "Game in progress..."){
        	winnerStatement = "It's a stalemate"
        }
        console.log(winnerStatement);
        console.log(turnInt);
        
        // display text
        winnerText = document.getElementById("win");
        winnerText.innerHTML = winnerStatement;
        
        
      }

      function makeButtons() {
        var btnString = "";
        var btnNum = 9;
        for (let i = 1; i <= 3; i++) {
          let btns = "";
          for (let j = 1; j <= 3 && btnNum >= 0; j++) {
            btns = "<div class='t-button num' id = " + btnNum-- +">" + "-"
              + "</div>" + btns;
          }
          btnString += btns + "<br />";
        } //for
        document.write(btnString);
      }


    </script>
  </head>

  <body>
    <h2>Assignment 2 Tic Tac Toe</h2>
    <div class='t-container'>
     
      <script language="javascript">
        makeButtons();

      </script>
    
    </div> 
    <div>
      Turn:
    </div>
    <div id="turn">
      1
    </div>
    <div>
      Current player:
    </div>
    <div id="player">X</div>
    <div id = "win">
     Game in progress...
    </div>
  </body>

</html>

